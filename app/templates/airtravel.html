<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8' />
  <title>SafeJourney</title>
  <link rel="shortcut icon" href="{{ url_for('static',filename='img/favicon.ico')}}">
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.js'></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.46.0/mapbox-gl.css' rel='stylesheet' />
  <style>
    body { margin:0; padding:0; }
    #map { position:absolute; top:0; bottom:0; width:100%; }
  </style>
</head>
<body>
<style>
.mapboxgl-popup {
    max-width: 200px;
}
</style>
<div id='map'></div>
<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoic2VldGhhdmVua2F0YWRyaSIsImEiOiJjamtuM2U3OHgwdGpsM3h0aG1sd3JpZGVpIn0.WHIomokVz9RAEUKOjFtY4Q';

var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/seethavenkatadri/cjkprwduu3xe42rnmrdbf2f4d',
  center: [-121.505, 37.45],
  zoom: 3
});

var url = 'https://wanderdrone.appspot.com/';
map.on('load', function() {
window.setInterval(function() {
        map.getSource('drone').setData(url);
    }, 0.5);
 map.loadImage('{{ url_for('static',filename='img/plane.png')}}', function(error, image) {
        if (error) throw error;
        map.addImage('flight', image);
        map.addSource('drone', { type: 'geojson', data: url });
        map.addLayer({
            "id": "points",
            "type": "symbol",
            "source": "drone",
            "layout": {
                "icon-image": "flight",
                "icon-size": 0.25,
                "icon-rotate":90
            }
        });
    });

});

</script>

</body>
</html>
